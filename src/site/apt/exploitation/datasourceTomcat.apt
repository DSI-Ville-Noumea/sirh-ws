 -----
 SIRH
 -----
 NOémie NICOLAS
 -----
  21/06/2012
  
Procédures

* Installation de Tomcat, base de données AS400

** Récupération du driver jt400

	Il suffit de suivre la démarche suivante depuis un shell linux :
	
+------------------------------------------+
cd
mkdir jt400;
export JT400_version="6.7";
cd jt400;
wget -U NoSuchBrowser/1.0 http://repo1.maven.org/maven2/net/sf/jt400/jt400/$JT400_version/jt400-$JT400_version.jar
+------------------------------------------+	

** Installation du driver

	Sous linux :
	
+------------------------------------------+
export CATALINA_HOME=/apache-tomcat-7.0.27/
cp $HOME/jt400/jt400-$JT400_version.jar $CATALINA_HOME/lib
+------------------------------------------+

	A ce stade, le driver est bien déposé.


** Ajout du datasource

    Dans tomcat, il est possible de declarer un datasource au niveau du serveur et d'utiliser celui-ci dans votre application
	
	* Se positionner dans le répertoire CONF de tomcat 
	
	* Editer le fichier context.xml et ajouter le contenu suivant à l'interieur de la balise <Context> :
	
+------------------------------------------+
<Resource name="jdbc/MAIRIE" auth="Container" type="javax.sql.DataSource"
               maxActive="100" maxIdle="30" minIdle="0" validationQuery="select 1 from sysibm.sysdummy1"   maxWait="10000" initialSize="1"
               username="***REMOVED***" password="***REMOVED***" driverClassName="com.ibm.as400.access.AS400JDBCDriver"
               url="jdbc:as400://***REMOVED***" poolPreparedStatements="true" />
+------------------------------------------+	

** Tester si l'application fontionne correctement
